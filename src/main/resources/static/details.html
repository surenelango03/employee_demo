<!DOCTYPE html>
<html>
<head>
    <title>Employee Details</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="FetchEmployeeDetails.js"></script>
    <style>
        .form-field {
            margin: 10px 0;
        }
        label {
            display: inline-block;
            width: 120px;
        }
        input:disabled {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Employee Details</h1>
    
    <form id="employeeDetailsForm">
        <div class="form-field">
            <label for="employeeId">Employee ID:</label>
            <input type="text" id="employeeId" name="employeeId" disabled>
        </div>
        
        <div class="form-field">
            <label for="employeeName">Employee Name:</label>
            <input type="text" id="employeeName" name="employeeName" disabled>
        </div>
        
        <div class="form-field">
            <label for="employeeSalary">Salary:</label>
            <input type="text" id="employeeSalary" name="employeeSalary" disabled>
        </div>
        
        <div class="form-field">
            <button type="button" id="okBtn">OK</button>
        </div>
    </form>

    <script>
        $(document).ready(function() {
            // First check query params (for GET case)
            const urlParams = new URLSearchParams(window.location.search);
            let employeeId = urlParams.get('id');
            let method = urlParams.get('method');

            // If not provided, check sessionStorage (for POST case)
            if (!employeeId) {
                employeeId = sessionStorage.getItem("employeeId");
                method = sessionStorage.getItem("method");
            }

            if (employeeId) {
                $('#employeeId').val(employeeId);

                if (method === 'post') {
                    // Use POST (request body)
                    fetchUsingPost(employeeId);
                } else {
                    // Default to GET
                    fetchEmployeeDetails(employeeId);
                }
            } else {
                alert('No employee ID provided');
            }

            // OK button click â†’ clear sessionStorage and return
            $('#okBtn').click(function() {
                sessionStorage.removeItem("employeeId");
                sessionStorage.removeItem("method");
                window.location.href = 'locate.html';
            });
        });
    </script>
</body>
</html>
